

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Abaqus &#8212; ARC Documentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-dropdown.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/sphinx-book-theme.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="https://arcdocs.github.io/arcdocs-jupyterbook/software/abaqus.html" />
    <link rel="shortcut icon" href="../_static/favicon-32x32.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">


<!-- Opengraph tags -->
<meta property="og:url"         content="https://arcdocs.github.io/arcdocs-jupyterbook/software/abaqus.html" />
<meta property="og:type"        content="article" />
<meta property="og:title"       content="Abaqus" />
<meta property="og:description" content="Abaqus  Contents  [1]{.toc_number .toc_depth_1} Introduction  [2]{.toc_number .toc_depth_1} Licence Management  [3]{.toc_number .toc_depth_1} Preparation  [4]{." />
<meta property="og:image"       content="https://arcdocs.github.io/arcdocs-jupyterbook/_static/logo.png" />

<meta name="twitter:card" content="summary" />


  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">ARC Documentation</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../welcome.html">
   Welcome
  </a>
 </li>
</ul>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../getting_started/start.html">
   Getting Started
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../useage/start.html">
   Useage
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="start.html">
   Software
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../systems/start.html">
   Systems
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://arcleeds.github.io/training/">
   Training
   <i class="fas fa-external-link-alt">
   </i>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../contact/start.html">
   Contact Us
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Visit the <a href="https://arcleeds.github.io/">Research Computing Home Site</a> <div> This book is powered by <a href="https://jupyterbook.org">Jupyter Book</a> </div>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/software/abaqus.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/arcdocs/arcdocs-jupyterbook"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/arcdocs/arcdocs-jupyterbook/issues/new?title=Issue%20on%20page%20%2Fsoftware/abaqus.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/arcdocs/arcdocs-jupyterbook/edit/working-master/book/software/abaqus.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction-introduction">
   [Introduction]{#Introduction}
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#licence-management-licence-management">
   [Licence Management]{#Licence_Management}
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#preparation-preparation">
   [Preparation]{#Preparation}
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setting-up-a-job-setting-up-a-job">
   [Setting Up a Job]{#Setting_Up_a_Job}
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#parallel-processors-parallel-processors">
   [Parallel Processors]{#Parallel_Processors}
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#submitting-a-job-submitting-a-job">
   [Submitting a Job]{#Submitting_a_Job}
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#example-script-example-script">
   [Example Script]{#Example_Script}
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#user-defined-fortran-subroutines-user-defined-fortran-subroutines">
   [User Defined Fortran subroutines]{#User_Defined_Fortran_subroutines}
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#checkpointing-checkpointing">
   [Checkpointing]{#Checkpointing}
  </a>
 </li>
</ul>

        </nav>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="abaqus">
<h1>Abaqus<a class="headerlink" href="#abaqus" title="Permalink to this headline">¶</a></h1>
<p>Contents</p>
<ul class="simple">
<li><p><a class="reference external" href="#Introduction">[1]{.toc_number .toc_depth_1} Introduction</a></p></li>
<li><p><a class="reference external" href="#Licence_Management">[2]{.toc_number .toc_depth_1} Licence
Management</a></p></li>
<li><p><a class="reference external" href="#Preparation">[3]{.toc_number .toc_depth_1} Preparation</a></p></li>
<li><p><a class="reference external" href="#Setting_Up_a_Job">[4]{.toc_number .toc_depth_1} Setting Up a Job</a></p></li>
<li><p><a class="reference external" href="#Parallel_Processors">[5]{.toc_number .toc_depth_1} Parallel
Processors</a></p></li>
<li><p><a class="reference external" href="#Submitting_a_Job">[6]{.toc_number .toc_depth_1} Submitting a Job</a></p></li>
<li><p><a class="reference external" href="#Example_Script">[7]{.toc_number .toc_depth_1} Example Script</a></p></li>
<li><p><a class="reference external" href="#User_Defined_Fortran_subroutines">[8]{.toc_number .toc_depth_1} User Defined Fortran
subroutines</a></p></li>
<li><p><a class="reference external" href="#Checkpointing">[9]{.toc_number .toc_depth_1} Checkpointing</a>
:::</p></li>
</ul>
<div class="section" id="introduction-introduction">
<h2>[Introduction]{#Introduction}<a class="headerlink" href="#introduction-introduction" title="Permalink to this headline">¶</a></h2>
<p>The purpose of this guide is to get the first few models running with
generic options so that you can start getting results back and have a
working system that you can modify to suit the specific needs of your
work. Because of this there will not be an in depth discussion of the
wide range of options and commands available, however there are
extensive help files available from the command line. Typing
[help]{.lang:default .decode:true .crayon-inline} will give a list of
built-in commands, [help &lt;command&gt;]{.lang:default .decode:true
.crayon-inline} will then give more specific information on that command
eg. [help help]{.lang:default .decode:true .crayon-inline} gives you
information about the help command. Entering [info info]{.lang:default
.decode:true .crayon-inline} will open a help manual and [info
&lt;command&gt;]{.lang:default .decode:true .crayon-inline} will give
specific information about that command eg. [info qsub]{.lang:default
.decode:true .crayon-inline} details the qsub command which submits a
job to the queue.</p>
</div>
<div class="section" id="licence-management-licence-management">
<h2>[Licence Management]{#Licence_Management}<a class="headerlink" href="#licence-management-licence-management" title="Permalink to this headline">¶</a></h2>
<p>Abaqus is a licensed application with a limited number of license
tokens. Running an Abaqus analysis requires more than one token. The
number of tokens needed (T) is given by the formula T = int(5 x
N^0.422) where N is the number of cpu cores. More simply, for common
job sizes the numbers are:</p>
<p>Number of cores   Tokens required</p>
<hr class="docutils" />
<p>1                 5
4                 8
8                 12
12                14
16                16
24                19
32                21
64                28</p>
<p><strong>Good practice</strong> would recommend not to run 5 jobs using 12 cpu cores
each (that would require 70 license tokens, i.e. over half the available
number of tokens)</p>
<p>For information, Abaqus scales efficiently to 4 processors, relatively
well to 8 processors but poorly further. Trying to run a job over more
that 8 to 12 cpu cores won’t increase the performances (and running over
more than the number of cpu core per node will even decrease the
performance).</p>
</div>
<div class="section" id="preparation-preparation">
<h2>[Preparation]{#Preparation}<a class="headerlink" href="#preparation-preparation" title="Permalink to this headline">¶</a></h2>
<p>First of all you will need an account on the facility and a suitable
piece of software to access it. I will be using WinSCP to do this so
keep in mind that if you are using an alternative this may have an
effect.</p>
<p>Running an Abaqus job from the command line, which is how you perform an
analysis, uses an input file with the extension [.inp]{.lang:default
.decode:true .crayon-inline} . This can be created from your model file
in the Abaqus CAE by right clicking the job in the model tree and
selecting [Write Input]{.lang:default .decode:true .crayon-inline} .
This can also be done from the job manager. This will create a file
called [&lt;job_name&gt;.inp]{.lang:default .decode:true .crayon-inline}
which is what Abaqus will use.</p>
<p>When logged in you will have a home directory (WinSCP should send you
here automatically). If you select the open directory option above the
remote directory window and select [Add]{.lang:default .decode:true
.crayon-inline} in the [Session bookmarks]{.lang:default .decode:true
.crayon-inline} tab it will save a bookmark to this directory which make
it easier to navigate around. When working on the facility you should
use the /nobackup directory as it has more working space and faster data
speeds. Make a new directory in /nobackup and place the input file you
wish to analyse in there (also bookmark this directory as well).</p>
</div>
<div class="section" id="setting-up-a-job-setting-up-a-job">
<h2>[Setting Up a Job]{#Setting_Up_a_Job}<a class="headerlink" href="#setting-up-a-job-setting-up-a-job" title="Permalink to this headline">¶</a></h2>
<p>There are two sections to a job submission, the first describes the job
to the queue system and the second tells Abaqus to perform the analysis
and gives it the information it needs. The information for both is
contained in a script file held in your /nobackup directory. This script
file is a text file with the extension .sh and can be created by
right-clicking in the remote directory window and selecting
[New]{.lang:default .decode:true .crayon-inline} and
[File]{.lang:default .decode:true .crayon-inline} .</p>
<p>In this script starting the line with a hash ( [#]{.lang:default
.decode:true .crayon-inline} ) symbol followed by a space comments out
the line so that it will be skipped when the program is run. This allows
you to leave notes within the code or save lines that you do not want
active at the time but may need later. Starting with a hash-dollar (
[#$]{.lang:default .decode:true .crayon-inline} ) and then a space
tells the system that this is a command to set up the queue. Having
nothing preceding the line means that it will be used by Abaqus to set
up the analysis.</p>
<p>For a simple script that will run an analysis on a single core use the
following, note that the lines have been numbered for clarity but these
numbers are not a part of the code:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#$ -l h_rt=&lt;run_time&gt;
#$ -l h_vmem=&lt;amount_of_RAM_queue&gt;
#$ -m be
#$ -M your@email_address
#$ -cwd  -V
module add abaqus
export LM_LICENSE_FILE=@:$LM_LICENSE_FILE
abaqus memory=&lt;amount_of_RAM_abaqus&gt; input=&lt;input_file&gt; job=&lt;job_name&gt; scratch=&quot;&lt;nobackup_directory&gt;&quot; int
</pre></div>
</div>
<p>[&lt;run_time&gt;]{.lang:default .decode:true .crayon-inline} is the amount
of time you are requesting from the queue, entered in the format
[hh:mm:ss]{.lang:default .decode:true .crayon-inline} . If the job
finishes before this it is fine but if the job takes longer it will
cancel when this time runs out so be sure to give more time than you
think you will need to avoid jobs failing midway through, keep in mind
however that requesting more time makes scheduling the jobs more
difficult and the maximum run time is 48 hours.</p>
<p>[&lt;amount_of_RAM_queue&gt;]{.lang:default .decode:true .crayon-inline}
is the amount of memory you are requesting from the queue for each core
(one in this case). Entered in megabytes in the format
[&lt;number&gt;M]{.lang:default .decode:true .crayon-inline} or gigabytes as
[&lt;number&gt;G]{.lang:default .decode:true .crayon-inline} so that to
request 1000Mb you would type [1000M]{.lang:default .decode:true
.crayon-inline} or for 1Gb [1G]{.lang:default .decode:true
.crayon-inline} The default allocation is 1Gb. Note that Abaqus seems to
use between 1-2Gb to run so this needs to be taken into account as well.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#$ -m be
#$ -M emailaddress@leeds.ac.uk
</pre></div>
</div>
<p>requests that an email be sent you your account when the job begins and
finishes.</p>
<p>[-cwd -V]{.lang:default .decode:true .crayon-inline} requests that the
working directory is your current directory, so run this from the
directory you created in /nobackup, and sends the results to the same
place.</p>
<p>ARC2 is configured with 16 cores per node and 32Gb per node. ARC3 has 24
cores per node and 128GB memory.</p>
<p>[&lt;amount_of_RAM_abaqus&gt;]{.lang:default .decode:true .crayon-inline}
is the total amount of memory that you wish to allow Aqaqus to use. When
running on a single core this will be the same as the
[&lt;amount_of_RAM_queue&gt;]{.lang:default .decode:true .crayon-inline}
, when running on multiple cores it will be that value multiplied by the
number of cores you are running the analysis on. This is entered in a
slightly different format than before, in the format
[&lt;number&gt;mb]{.lang:default .decode:true .crayon-inline} to specify the
amount in megabytes. Therefore for 1000Mb enter [1000mb]{.lang:default
.decode:true .crayon-inline} .</p>
<p><strong>UPDATE</strong>: [&lt;amount_of_RAM_abaqus&gt;]{.lang:default .decode:true
.crayon-inline} is the amount of memory Abaqus will devote to the
solver. There are other memory overheads required by Abaqus. Thus, you
will need to define [&lt;amount_of_RAM_abaqus&gt;]{.lang:default
.decode:true .crayon-inline} to be less than the total memory requested
from the queues to allow for this. For instance if you request two cores
at [2Gb]{.lang:default .decode:true .crayon-inline} each, then set
[memory=3000m]{.lang:default .decode:true .crayon-inline} for example,
which would allow [1Gb]{.lang:default .decode:true .crayon-inline} for
memory overheads.</p>
<p>[&lt;input_file&gt;]{.lang:default .decode:true .crayon-inline} is the name
of the .inp input file you wish to analyse, therefore if the name of the
file is [analysis1.inp]{.lang:default .decode:true .crayon-inline} you
enter [analysis1.inp]{.lang:default .decode:true .crayon-inline} here.</p>
<p>[&lt;job_name&gt;]{.lang:default .decode:true .crayon-inline} is the name
of the job, the output files will be named
[&lt;job_name&gt;.&lt;extension&gt;]{.lang:default .decode:true .crayon-inline}
.</p>
<p>[&lt;nobackup_directory&gt;]{.lang:default .decode:true .crayon-inline} is
the path of the directory you created in /nobackup. For example if you
made a directory on /nobackup called [username]{.lang:default
.decode:true .crayon-inline} the value for would be
[/nobackup/username]{.lang:default .decode:true .crayon-inline} . Note
that the speechmarks surrounding the directory path are to be typed in.</p>
<p>[&lt;license_port&gt;]{.lang:default .decode:true .crayon-inline} is the
port where the Abaqus license you are using is located and
[&lt;license_server&gt;]{.lang:default .decode:true .crayon-inline} is the
server for the same license. These details depend on the departmental
license you are using and should be available from local IT staff.</p>
</div>
<div class="section" id="parallel-processors-parallel-processors">
<h2>[Parallel Processors]{#Parallel_Processors}<a class="headerlink" href="#parallel-processors-parallel-processors" title="Permalink to this headline">¶</a></h2>
<p>To make use of several cpu cores to run your analysis use a script file
in the form:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#$ -l h_rt=&lt;run_time&gt;
#$ -l h_vmem=&lt;amount_of_RAM_queue&gt;
#$ -m be
#$ -M your@email_address
#$ -pe smp 
#$ -cwd  -V
  
module add abaqus
export LM_LICENSE_FILE=@:$LM_LICENSE_FILE
abaqus memory=&lt;amount_of_RAM_abaqus&gt; cpus=$NSLOTS input=&lt;input_file&gt; job=&lt;job_name&gt; mp_mode=threads scratch=&quot;&lt;nobackup_directory&gt;&quot; int
</pre></div>
</div>
<p>[&lt;number_cores&gt;]{.lang:default .decode:true .crayon-inline} is the
number of cores you are requesting to be used for the analysis.
[$NSLOTS]{.lang:default .decode:true .crayon-inline} is an
environmental variable, that is automatically set to equal
[&lt;number_cores&gt;]{.lang:default .decode:true .crayon-inline} , and is
used to pass the number of cores to abaqus. Note that there will now be
a difference between the two memory requests, as described above.</p>
<p><strong>UPDATE</strong>: [&lt;amount_of_RAM_abaqus&gt;]{.lang:default .decode:true
.crayon-inline} is the amount of memory Abaqus will devote to the
solver. There are other memory overheads required by Abaqus. Thus, you
will need to define [&lt;amount_of_RAM_abaqus&gt;]{.lang:default
.decode:true .crayon-inline} to be less than the total memory requested
from the queues to allow for this. For instance if you request two cores
at [2Gb]{.lang:default .decode:true .crayon-inline} each, then set
[memory=3000m]{.lang:default .decode:true .crayon-inline} for example,
which would allow [1Gb]{.lang:default .decode:true .crayon-inline} for
memory overheads.</p>
</div>
<div class="section" id="submitting-a-job-submitting-a-job">
<h2>[Submitting a Job]{#Submitting_a_Job}<a class="headerlink" href="#submitting-a-job-submitting-a-job" title="Permalink to this headline">¶</a></h2>
<p>To then submit a job you use the command line in WinSCP or the
comparable program that you are using. Enter [qsub
&lt;script_file_name&gt;]{.lang:default .decode:true .crayon-inline} where
the [&lt;script_file_name&gt;]{.lang:default .decode:true .crayon-inline}
is the name of the file created above that holds the settings for the
job. Therefore if this file is called [job_submission.sh]{.lang:default
.decode:true .crayon-inline} then you would type [qsub
job_submission.sh]{.lang:default .decode:true .crayon-inline} . If the
submission is successful the command line response should confirm this
and give a job ID. The status of your jobs can be queried with the line
[qstat -f]{.lang:default .decode:true .crayon-inline} . When the job
starts and ends you should receive a confirmation email and the results
of the analysis will be placed into your /nobackup directory.</p>
</div>
<div class="section" id="example-script-example-script">
<h2>[Example Script]{#Example_Script}<a class="headerlink" href="#example-script-example-script" title="Permalink to this headline">¶</a></h2>
<p>Just to provide an example script with some numbers in place, for a
model requesting 12Gb of memory and 4 hours to run an analysis of the
file [input.inp]{.lang:default .decode:true .crayon-inline} :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#$ -l h_rt=4:00:00
#$ -l h_vmem=1500M
#$ -m be
#$ -M me@leeds.ac.uk
#$ -pe smp 8
#$ -cwd  -V
module add abaqus
export LM_LICENSE_FILE=@license_server&gt;
abaqus memory=12000mb cpus=$NSLOTS input=input.inp job=input mp_mode=threads scratch=&quot;/nobackup/example-user/&quot; int
</pre></div>
</div>
</div>
<div class="section" id="user-defined-fortran-subroutines-user-defined-fortran-subroutines">
<h2>[User Defined Fortran subroutines]{#User_Defined_Fortran_subroutines}<a class="headerlink" href="#user-defined-fortran-subroutines-user-defined-fortran-subroutines" title="Permalink to this headline">¶</a></h2>
<p>To include user defined Fortran subroutines, e.g.
[exampleroutine.f]{.lang:default .decode:true .crayon-inline} , you will
need to prepend the licence for the compiler to the licence path,
[export
LM_LICENSE_FILE=&lt;license_port&gt;&#64;license_server&gt;:$LM_LICENSE_FILE]{.lang:default
.decode:true .crayon-inline} . For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#$ -l h_rt=4:00:00
#$ -l h_vmem=1500M
#$ -m be
#$ -M your@email_address
#$ -cwd  -V
module add abaqus
export LM_LICENSE_FILE=@license_server&gt;:$LM_LICENSE_FILE
abaqus memory=12000mb input=input.inp job=input user=exampleroutine scratch=&quot;/nobackup/example-user&quot; int
</pre></div>
</div>
<p>This ensures that <strong>both</strong> Abaqus and the system default Intel Fortran
compiler are able to access their relevant licence servers.</p>
</div>
<div class="section" id="checkpointing-checkpointing">
<h2>[Checkpointing]{#Checkpointing}<a class="headerlink" href="#checkpointing-checkpointing" title="Permalink to this headline">¶</a></h2>
<p>Users sometimes find that their jobs take longer than the 48 hours
permitted by the scheduler to complete. Providing that your model does
not automatically re-mesh (for example, after a fracture), you may be
able to make use of Abaqus’ built-in checkpointing function.</p>
<p>This will create a <strong>restart</strong> file (.res file extension) from which a
job that is killed can be restarted.</p>
<p>1. Activate the restart feature by adding the line:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>*restart, write
</pre></div>
</div>
<p>at the top of your input file and run your job as normal. It should
produce a restart file with a [.res]{.lang:default .decode:true
.crayon-inline} file extension.</p>
<p>2. Run the restart analysis with</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>abaqus job=jobName oldjob=oldjobName ...
</pre></div>
</div>
<p>where [oldJobName]{.lang:default .decode:true .crayon-inline} is the
initial input file and [newJobName]{.lang:default .decode:true
.crayon-inline} is a file which contains only the line:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>*restart, read
</pre></div>
</div>
<p>:::</p>
<p>::: {.entry-meta}
:::
:::
:::
:::</p>
<p>::: {.container}
::: {.site-info}
::: {.footer-credit}
Built with <a class="reference external" href="https://thethemefoundry.com/make/">Make</a>{.theme-name}. Your
friendly WordPress page builder theme.
:::
:::
:::
:::</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./software"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By University of Leeds Research Computing Team<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="../_static/js/index.js"></script>
    
  </body>
</html>