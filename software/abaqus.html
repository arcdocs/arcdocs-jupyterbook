

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Abaqus &#8212; ARC Documentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/sphinx-book-theme.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="https://arcdocs.github.io/arcdocs-jupyterbook/software/abaqus.html" />
    <link rel="shortcut icon" href="../_static/favicon-32x32.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="AMBER" href="amber.html" />
    <link rel="prev" title="Software" href="start.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">


<!-- Opengraph tags -->
<meta property="og:url"         content="https://arcdocs.github.io/arcdocs-jupyterbook/software/abaqus.html" />
<meta property="og:type"        content="article" />
<meta property="og:title"       content="Abaqus" />
<meta property="og:description" content="Abaqus  Introduction  The purpose of this guide is to get the first few models running with generic options so that you can start getting results back and have " />
<meta property="og:image"       content="https://arcdocs.github.io/arcdocs-jupyterbook/_static/logo.png" />

<meta name="twitter:card" content="summary">


  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">ARC Documentation</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  
  <ul class="nav sidenav_l1">
  <li class="">
    <a href="../welcome.html">Welcome</a>
  </li>
  <li class="">
    <a href="../getting_started/start.html">Getting Started</a>
  </li>
  <li class="">
    <a href="../usage/start.html">Usage</a>
  </li>
  <li class="active">
    <a href="start.html">Software</a>
  <ul class="nav sidenav_l2">
    <li class="active">
      <a href="">Abaqus</a>
    </li>
    <li class="">
      <a href="amber.html">AMBER</a>
    </li>
    <li class="">
      <a href="ansys.html">Ansys</a>
    </li>
    <li class="">
      <a href="comsol.html">Comsol</a>
    </li>
    <li class="">
      <a href="dl_poly.html">DLpoly</a>
    </li>
    <li class="">
      <a href="gaussian.html">DLpoly {#dlpoly .entry-title}</a>
    </li>
    <li class="">
      <a href="gromacs.html">Gromacs</a>
    </li>
    <li class="">
      <a href="idl.html">IDL</a>
    </li>
    <li class="">
      <a href="matlab.html">Matlab</a>
    </li>
    <li class="">
      <a href="molpro.html">Molpro</a>
    </li>
    <li class="">
      <a href="namd.html">NAMD</a>
    </li>
    <li class="">
      <a href="openfoam.html">OpenFoam</a>
    </li>
    <li class="">
      <a href="paraview.html">Paraview</a>
    </li>
    <li class="">
      <a href="R.html">R</a>
    </li>
    <li class="">
      <a href="stata.html">Stata</a>
    </li>
    <li class="">
      <a href="visit.html">Visit</a>
    </li>
    <li class="">
      <a href="vmd.html">VMD (Visual Molecular Dynamics)</a>
    </li>
  </ul>
  </li>
  <li class="">
    <a href="../systems/start.html">Systems</a>
  </li>
  <li class="">
    <a href="https://arcleeds.github.io/training/">Training<i class="fas fa-external-link-alt"></i></a>
  </li>
  <li class="">
    <a href="../contact/start.html">Contact Us</a>
  </li>
</ul>
</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Visit the <a href="https://arcleeds.github.io/">Research Computing Home Site</a> <div> This book is powered by <a href="https://jupyterbook.org">Jupyter Book</a> </div>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/software/abaqus.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/arcdocs/arcdocs-jupyterbook"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/arcdocs/arcdocs-jupyterbook/issues/new?title=Issue%20on%20page%20%2Fsoftware/abaqus.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/arcdocs/arcdocs-jupyterbook/edit/working-master/book/software/abaqus.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>
    <div class="d-none d-md-block col-md-2 bd-toc show">
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#introduction" class="nav-link">Introduction</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#licence-management" class="nav-link">Licence Management</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#preparation" class="nav-link">Preparation</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#setting-up-a-job" class="nav-link">Setting Up a Job</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#parallel-processors" class="nav-link">Parallel Processors</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#submitting-a-job" class="nav-link">Submitting a Job</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#example-script" class="nav-link">Example Script</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#user-defined-fortran-subroutines" class="nav-link">User Defined Fortran subroutines</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#checkpointing" class="nav-link">Checkpointing</a>
        </li>
    
    </ul>
</nav>



<div class="tocsection editthispage">
    <a href="https://github.com/arcdocs/arcdocs-jupyterbook/edit/working-master/book/software/abaqus.md">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="abaqus">
<h1>Abaqus<a class="headerlink" href="#abaqus" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The purpose of this guide is to get the first few models running with
generic options so that you can start getting results back and have a
working system that you can modify to suit the specific needs of your
work. Because of this there will not be an in depth discussion of the
wide range of options and commands available, however there are
extensive help files available from the command line. Typing
<code class="docutils literal notranslate"><span class="pre">help</span></code> will give a list of
built-in commands, <code class="docutils literal notranslate"><span class="pre">help</span></code> will then give more specific information on that command
eg. <code class="docutils literal notranslate"><span class="pre">help</span> <span class="pre">help</span></code> gives you
information about the help command. Entering <code class="docutils literal notranslate"><span class="pre">info</span> <span class="pre">info</span></code> will open a help manual and <code class="docutils literal notranslate"><span class="pre">info</span> <span class="pre">&lt;command&gt;</span></code> will give
specific information about that command eg. <code class="docutils literal notranslate"><span class="pre">info</span> <span class="pre">qsub</span></code> details the qsub command which submits a
job to the queue.</p>
</div>
<div class="section" id="licence-management">
<h2>Licence Management<a class="headerlink" href="#licence-management" title="Permalink to this headline">¶</a></h2>
<p>Abaqus is a licensed application with a limited number of license
tokens. Running an Abaqus analysis requires more than one token. The
number of tokens needed (T) is given by the formula T = int(5 x
N^0.422) where N is the number of cpu cores. More simply, for common
job sizes the numbers are:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Number of cores</p></th>
<th class="head"><p>Tokens required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>5</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>8</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>12</p></td>
</tr>
<tr class="row-odd"><td><p>12</p></td>
<td><p>14</p></td>
</tr>
<tr class="row-even"><td><p>16</p></td>
<td><p>16</p></td>
</tr>
<tr class="row-odd"><td><p>24</p></td>
<td><p>19</p></td>
</tr>
<tr class="row-even"><td><p>32</p></td>
<td><p>21</p></td>
</tr>
<tr class="row-odd"><td><p>64</p></td>
<td><p>28</p></td>
</tr>
</tbody>
</table>
<p><strong>Good practice</strong> would recommend not to run 5 jobs using 12 cpu cores
each (that would require 70 license tokens, i.e. over half the available
number of tokens)</p>
<p>For information, Abaqus scales efficiently to 4 processors, relatively
well to 8 processors but poorly further. Trying to run a job over more
that 8 to 12 cpu cores won’t increase the performances (and running over
more than the number of cpu core per node will even decrease the
performance).</p>
</div>
<div class="section" id="preparation">
<h2>Preparation<a class="headerlink" href="#preparation" title="Permalink to this headline">¶</a></h2>
<p>First of all you will need an account on the facility and a suitable
piece of software to access it. I will be using WinSCP to do this so
keep in mind that if you are using an alternative this may have an
effect.</p>
<p>Running an Abaqus job from the command line, which is how you perform an
analysis, uses an input file with the extension <code class="docutils literal notranslate"><span class="pre">.inp</span></code> . This can be created from your model file
in the Abaqus CAE by right clicking the job in the model tree and
selecting <code class="docutils literal notranslate"><span class="pre">Write</span> <span class="pre">Input</span></code> .
This can also be done from the job manager. This will create a file
called <code class="docutils literal notranslate"><span class="pre">&lt;job_name&gt;.inp</span></code>
which is what Abaqus will use.</p>
<p>When logged in you will have a home directory (WinSCP should send you
here automatically). If you select the open directory option above the
remote directory window and select <code class="docutils literal notranslate"><span class="pre">Add</span></code> in the <code class="docutils literal notranslate"><span class="pre">Session</span> <span class="pre">bookmarks</span></code> tab it will save a bookmark to this directory which make
it easier to navigate around. When working on the facility you should
use the /nobackup directory as it has more working space and faster data
speeds. Make a new directory in /nobackup and place the input file you
wish to analyse in there (also bookmark this directory as well).</p>
</div>
<div class="section" id="setting-up-a-job">
<h2>Setting Up a Job<a class="headerlink" href="#setting-up-a-job" title="Permalink to this headline">¶</a></h2>
<p>There are two sections to a job submission, the first describes the job
to the queue system and the second tells Abaqus to perform the analysis
and gives it the information it needs. The information for both is
contained in a script file held in your /nobackup directory. This script
file is a text file with the extension .sh and can be created by
right-clicking in the remote directory window and selecting
<code class="docutils literal notranslate"><span class="pre">New</span></code> and
<code class="docutils literal notranslate"><span class="pre">File</span></code> .</p>
<p>In this script starting the line with a hash ( <code class="docutils literal notranslate"><span class="pre">#</span></code> ) symbol followed by a space comments out
the line so that it will be skipped when the program is run. This allows
you to leave notes within the code or save lines that you do not want
active at the time but may need later. Starting with a hash-dollar (
<code class="docutils literal notranslate"><span class="pre">#$</span></code> ) and then a space
tells the system that this is a command to set up the queue. Having
nothing preceding the line means that it will be used by Abaqus to set
up the analysis.</p>
<p>For a simple script that will run an analysis on a single core use the
following, note that the lines have been numbered for clarity but these
numbers are not a part of the code:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#$ -l h_rt=&lt;run_time&gt;
#$ -l h_vmem=&lt;amount_of_RAM_queue&gt;
#$ -m be
#$ -M your@email_address
#$ -cwd  -V
module add abaqus
export LM_LICENSE_FILE=@:$LM_LICENSE_FILE
abaqus memory=&lt;amount_of_RAM_abaqus&gt; input=&lt;input_file&gt; job=&lt;job_name&gt; scratch=&quot;&lt;nobackup_directory&gt;&quot; int
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">&lt;run_time&gt;</span></code> is the amount
of time you are requesting from the queue, entered in the format
<code class="docutils literal notranslate"><span class="pre">hh:mm:ss</span></code> . If the job
finishes before this it is fine but if the job takes longer it will
cancel when this time runs out so be sure to give more time than you
think you will need to avoid jobs failing midway through, keep in mind
however that requesting more time makes scheduling the jobs more
difficult and the maximum run time is 48 hours.</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;amount_of_RAM_queue&gt;</span></code>
is the amount of memory you are requesting from the queue for each core
(one in this case). Entered in megabytes in the format
<code class="docutils literal notranslate"><span class="pre">&lt;number&gt;M</span></code> or gigabytes as
<code class="docutils literal notranslate"><span class="pre">&lt;number&gt;G</span></code> so that to
request 1000Mb you would type <code class="docutils literal notranslate"><span class="pre">1000M</span></code> or for 1Gb <code class="docutils literal notranslate"><span class="pre">1G</span></code> The default allocation is 1Gb. Note that Abaqus seems to
use between 1-2Gb to run so this needs to be taken into account as well.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#$ -m be
#$ -M emailaddress@leeds.ac.uk
</pre></div>
</div>
<p>requests that an email be sent you your account when the job begins and
finishes.</p>
<p><code class="docutils literal notranslate"><span class="pre">-cwd</span> <span class="pre">-V</span></code> requests that the
working directory is your current directory, so run this from the
directory you created in /nobackup, and sends the results to the same
place.</p>
<p>ARC2 is configured with 16 cores per node and 32Gb per node. ARC3 has 24
cores per node and 128GB memory.</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;amount_of_RAM_abaqus&gt;</span></code>
is the total amount of memory that you wish to allow Aqaqus to use. When
running on a single core this will be the same as the
<code class="docutils literal notranslate"><span class="pre">&lt;amount_of_RAM_queue&gt;</span></code>
, when running on multiple cores it will be that value multiplied by the
number of cores you are running the analysis on. This is entered in a
slightly different format than before, in the format
<code class="docutils literal notranslate"><span class="pre">&lt;number&gt;mb</span></code> to specify the
amount in megabytes. Therefore for 1000Mb enter <code class="docutils literal notranslate"><span class="pre">1000mb</span></code> .</p>
<p><strong>UPDATE</strong>: <code class="docutils literal notranslate"><span class="pre">&lt;amount_of_RAM_abaqus&gt;</span></code> is the amount of memory Abaqus will devote to the
solver. There are other memory overheads required by Abaqus. Thus, you
will need to define <code class="docutils literal notranslate"><span class="pre">&lt;amount_of_RAM_abaqus&gt;</span></code> to be less than the total memory requested
from the queues to allow for this. For instance if you request two cores
at <code class="docutils literal notranslate"><span class="pre">2Gb</span></code> each, then set
<code class="docutils literal notranslate"><span class="pre">memory=3000m</span></code> for example,
which would allow <code class="docutils literal notranslate"><span class="pre">1Gb</span></code> for
memory overheads.</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;input_file&gt;</span></code> is the name
of the .inp input file you wish to analyse, therefore if the name of the
file is <code class="docutils literal notranslate"><span class="pre">analysis1.inp</span></code> you
enter <code class="docutils literal notranslate"><span class="pre">analysis1.inp</span></code> here.</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;job_name&gt;</span></code> is the name
of the job, the output files will be named
<code class="docutils literal notranslate"><span class="pre">&lt;job_name&gt;.&lt;extension&gt;</span></code>
.</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;nobackup_directory&gt;</span></code> is
the path of the directory you created in /nobackup. For example if you
made a directory on /nobackup called <code class="docutils literal notranslate"><span class="pre">username</span></code> the value for would be
<code class="docutils literal notranslate"><span class="pre">/nobackup/username</span></code> . Note
that the speechmarks surrounding the directory path are to be typed in.</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;license_port&gt;</span></code> is the
port where the Abaqus license you are using is located and
<code class="docutils literal notranslate"><span class="pre">&lt;license_server&gt;</span></code> is the
server for the same license. These details depend on the departmental
license you are using and should be available from local IT staff.</p>
</div>
<div class="section" id="parallel-processors">
<h2>Parallel Processors<a class="headerlink" href="#parallel-processors" title="Permalink to this headline">¶</a></h2>
<p>To make use of several cpu cores to run your analysis use a script file
in the form:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#$ -l h_rt=&lt;run_time&gt;
#$ -l h_vmem=&lt;amount_of_RAM_queue&gt;
#$ -m be
#$ -M your@email_address
#$ -pe smp 
#$ -cwd  -V
  
module add abaqus
export LM_LICENSE_FILE=@:$LM_LICENSE_FILE
abaqus memory=&lt;amount_of_RAM_abaqus&gt; cpus=$NSLOTS input=&lt;input_file&gt; job=&lt;job_name&gt; mp_mode=threads scratch=&quot;&lt;nobackup_directory&gt;&quot; int
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">&lt;number_cores&gt;</span></code> is the
number of cores you are requesting to be used for the analysis.
<code class="docutils literal notranslate"><span class="pre">$NSLOTS</span></code> is an
environmental variable, that is automatically set to equal
<code class="docutils literal notranslate"><span class="pre">&lt;number_cores&gt;</span></code> , and is
used to pass the number of cores to abaqus. Note that there will now be
a difference between the two memory requests, as described above.</p>
<p><strong>UPDATE</strong>: <code class="docutils literal notranslate"><span class="pre">&lt;amount_of_RAM_abaqus&gt;</span></code> is the amount of memory Abaqus will devote to the
solver. There are other memory overheads required by Abaqus. Thus, you
will need to define <code class="docutils literal notranslate"><span class="pre">&lt;amount_of_RAM_abaqus&gt;</span></code> to be less than the total memory requested
from the queues to allow for this. For instance if you request two cores
at <code class="docutils literal notranslate"><span class="pre">2Gb</span></code> each, then set
<code class="docutils literal notranslate"><span class="pre">memory=3000m</span></code> for example,
which would allow <code class="docutils literal notranslate"><span class="pre">1Gb</span></code> for
memory overheads.</p>
</div>
<div class="section" id="submitting-a-job">
<h2>Submitting a Job<a class="headerlink" href="#submitting-a-job" title="Permalink to this headline">¶</a></h2>
<p>To then submit a job you use the command line in WinSCP or the
comparable program that you are using. Enter <code class="docutils literal notranslate"><span class="pre">qsub</span> <span class="pre">&lt;script_file_name&gt;</span></code> where
the <code class="docutils literal notranslate"><span class="pre">&lt;script_file_name&gt;</span></code>
is the name of the file created above that holds the settings for the
job. Therefore if this file is called <code class="docutils literal notranslate"><span class="pre">job_submission.sh</span></code> then you would type <code class="docutils literal notranslate"><span class="pre">qsub</span> <span class="pre">job_submission.sh</span></code> . If the
submission is successful the command line response should confirm this
and give a job ID. The status of your jobs can be queried with the line
<code class="docutils literal notranslate"><span class="pre">qstat</span> <span class="pre">-f</span></code> . When the job
starts and ends you should receive a confirmation email and the results
of the analysis will be placed into your /nobackup directory.</p>
</div>
<div class="section" id="example-script">
<h2>Example Script<a class="headerlink" href="#example-script" title="Permalink to this headline">¶</a></h2>
<p>Just to provide an example script with some numbers in place, for a
model requesting 12Gb of memory and 4 hours to run an analysis of the
file <code class="docutils literal notranslate"><span class="pre">input.inp</span></code> :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#$ -l h_rt=4:00:00
#$ -l h_vmem=1500M
#$ -m be
#$ -M me@leeds.ac.uk
#$ -pe smp 8
#$ -cwd  -V
module add abaqus
export LM_LICENSE_FILE=@license_server&gt;
abaqus memory=12000mb cpus=$NSLOTS input=input.inp job=input mp_mode=threads scratch=&quot;/nobackup/example-user/&quot; int
</pre></div>
</div>
</div>
<div class="section" id="user-defined-fortran-subroutines">
<h2>User Defined Fortran subroutines<a class="headerlink" href="#user-defined-fortran-subroutines" title="Permalink to this headline">¶</a></h2>
<p>To include user defined Fortran subroutines, e.g.
<code class="docutils literal notranslate"><span class="pre">exampleroutine.f</span></code> , you will
need to prepend the licence for the compiler to the licence path,
<code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">LM_LICENSE_FILE=&lt;license_port&gt;&#64;license_server&gt;:$LM_LICENSE_FILE</span></code> . For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#$ -l h_rt=4:00:00
#$ -l h_vmem=1500M
#$ -m be
#$ -M your@email_address
#$ -cwd  -V
module add abaqus
export LM_LICENSE_FILE=@license_server&gt;:$LM_LICENSE_FILE
abaqus memory=12000mb input=input.inp job=input user=exampleroutine scratch=&quot;/nobackup/example-user&quot; int
</pre></div>
</div>
<p>This ensures that <strong>both</strong> Abaqus and the system default Intel Fortran
compiler are able to access their relevant licence servers.</p>
</div>
<div class="section" id="checkpointing">
<h2>Checkpointing<a class="headerlink" href="#checkpointing" title="Permalink to this headline">¶</a></h2>
<p>Users sometimes find that their jobs take longer than the 48 hours
permitted by the scheduler to complete. Providing that your model does
not automatically re-mesh (for example, after a fracture), you may be
able to make use of Abaqus’ built-in checkpointing function.</p>
<p>This will create a <strong>restart</strong> file (.res file extension) from which a
job that is killed can be restarted.</p>
<ol>
<li><p>Activate the restart feature by adding the line:</p>
<p>*restart, write</p>
</li>
</ol>
<p>at the top of your input file and run your job as normal. It should
produce a restart file with a <code class="docutils literal notranslate"><span class="pre">.res</span></code> file extension.</p>
<ol>
<li><p>Run the restart analysis with</p>
<p>abaqus job=jobName oldjob=oldjobName …</p>
</li>
</ol>
<p>where <code class="docutils literal notranslate"><span class="pre">oldJobName</span></code> is the
initial input file and <code class="docutils literal notranslate"><span class="pre">newJobName</span></code> is a file which contains only the line:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>*restart, read
</pre></div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./software"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="start.html" title="previous page">Software</a>
    <a class='right-next' id="next-link" href="amber.html" title="next page">AMBER</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By University of Leeds Research Computing Team<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="../_static/js/index.js"></script>
    
  </body>
</html>