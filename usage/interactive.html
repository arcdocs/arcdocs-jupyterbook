

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Interactive jobs &#8212; ARC Documentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/sphinx-book-theme.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="https://arcdocs.github.io/arcdocs-jupyterbook/usage/interactive.html" />
    <link rel="shortcut icon" href="../_static/favicon-32x32.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Troubleshooting jobs on HPC" href="troubleshooting.html" />
    <link rel="prev" title="Batch jobs" href="batchjob.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">


<!-- Opengraph tags -->
<meta property="og:url"         content="https://arcdocs.github.io/arcdocs-jupyterbook/usage/interactive.html" />
<meta property="og:type"        content="article" />
<meta property="og:title"       content="Interactive jobs" />
<meta property="og:description" content="Interactive jobs  It is also possible to runs jobs in interactive mode on both ARC3 and ARC4. This means rather than queueing for your job to run on the batch s" />
<meta property="og:image"       content="https://arcdocs.github.io/arcdocs-jupyterbook/_static/logo.png" />

<meta name="twitter:card" content="summary">


  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">ARC Documentation</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  
  <ul class="nav sidenav_l1">
  <li class="">
    <a href="../welcome.html">Welcome</a>
  </li>
  <li class="">
    <a href="../getting_started/start.html">Getting Started</a>
  </li>
  <li class="active">
    <a href="start.html">Usage</a>
  <ul class="nav sidenav_l2">
    <li class="">
      <a href="batchjob.html">Batch jobs</a>
    </li>
    <li class="active">
      <a href="">Interactive jobs</a>
    </li>
    <li class="">
      <a href="troubleshooting.html">Troubleshooting jobs on HPC</a>
    </li>
    <li class="">
      <a href="taskarrays.html">Task arrays</a>
    </li>
    <li class="">
      <a href="gpgpu.html">General Purpose GPU</a>
    </li>
    <li class="">
      <a href="acknowledgement.html">ARC Acknowledgement</a>
    </li>
  </ul>
  </li>
  <li class="">
    <a href="../software/start.html">Software</a>
  </li>
  <li class="">
    <a href="../systems/start.html">Systems</a>
  </li>
  <li class="">
    <a href="https://arcleeds.github.io/training/">Training<i class="fas fa-external-link-alt"></i></a>
  </li>
  <li class="">
    <a href="../contact/start.html">Contact Us</a>
  </li>
</ul>
</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Visit the <a href="https://arcleeds.github.io/">Research Computing Home Site</a> <div> This book is powered by <a href="https://jupyterbook.org">Jupyter Book</a> </div>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/usage/interactive.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/arcdocs/arcdocs-jupyterbook"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/arcdocs/arcdocs-jupyterbook/issues/new?title=Issue%20on%20page%20%2Fusage/interactive.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/arcdocs/arcdocs-jupyterbook/edit/working-master/book/usage/interactive.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>
    <div class="d-none d-md-block col-md-2 bd-toc show">
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#interactive-jobs-on-compute-nodes" class="nav-link">Interactive jobs on compute nodes</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#interactive-mpi-jobs" class="nav-link">Interactive MPI jobs</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#interactive-jobs-on-gpu-nodes" class="nav-link">Interactive jobs on GPU nodes</a>
        </li>
    
    </ul>
</nav>



<div class="tocsection editthispage">
    <a href="https://github.com/arcdocs/arcdocs-jupyterbook/edit/working-master/book/usage/interactive.md">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="interactive-jobs">
<h1>Interactive jobs<a class="headerlink" href="#interactive-jobs" title="Permalink to this headline">¶</a></h1>
<p>It is also possible to runs jobs in interactive mode on both ARC3 and ARC4. This means rather than queueing for your job to run on the batch system you request resource for an interactive sessions via the shell. When the resource becomes available an interactive shell session is created in which you can run code directly on compute resource.</p>
<p>This process still involves requesting resource and queueing for that resource under the <a class="reference external" href="./batchjob#fair-share-policy">fair-share policy</a> so be prepared to wait if you request a significant amount of resource.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>We strongly discourage users from using interactive sessions for interactive code development using platforms like jupyter, spyder or Rstudio. Code development should be done before deploying code on the HPC.</p>
</div>
<div class="section" id="interactive-jobs-on-compute-nodes">
<h2>Interactive jobs on compute nodes<a class="headerlink" href="#interactive-jobs-on-compute-nodes" title="Permalink to this headline">¶</a></h2>
<p>You can request an interactive session on a standard compute node by using the command <code class="docutils literal notranslate"><span class="pre">qrsh</span></code>. As with submitting a batch job you will also need to pass it options to specify how much resource you wish to request.</p>
<p>For instance to request an interactive session for 15 minutes with access to 2 cores each with 4 GB of memory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ qrsh -l <span class="nv">h_rt</span><span class="o">=</span><span class="m">00</span>:15:00,h_vmem<span class="o">=</span>4G -pe smp <span class="m">2</span>
</pre></div>
</div>
<p>This sends the request to the queue and the prompt will wait until the session can be started. When it starts the prompt will return but appear changed from our initial prompt.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>exuser@login2.arc4 ~<span class="o">]</span>$ qrsh -l <span class="nv">h_rt</span><span class="o">=</span><span class="m">00</span>:15:00,h_vmem<span class="o">=</span>4G -pe smp <span class="m">2</span>

<span class="o">[</span>exuser@d10s2b4.arc4 ~<span class="o">]</span>$
</pre></div>
</div>
<p>The prompt changes to show that the interactive session is now running on a specific compute node on ARC4. From here you can now run code or an applications directly on the compute node.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you have made changed to your environment on the login nodes these will <strong>not</strong> be preserved when connecting to an interactive session and you will be required to rerun <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">load</span></code> commands. Connecting to an interactive session does create a new login shell which means any commands in your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> are executed when you connect.</p>
</div>
</div>
<div class="section" id="interactive-mpi-jobs">
<h2>Interactive MPI jobs<a class="headerlink" href="#interactive-mpi-jobs" title="Permalink to this headline">¶</a></h2>
<p>For development and testing purposes, it might be convenient to run MPI jobs in interactive mode and have them launch fairly quickly. In this case it would be advisable to use the <code class="docutils literal notranslate"><span class="pre">-l</span> <span class="pre">placement=scatter</span></code> option.</p>
<p>This will likely get the job to launch fairly quickly at the expense of performance. For instance to run <code class="docutils literal notranslate"><span class="pre">mympiprogram</span></code> for 30 minutes on 4 cores with 1GB memory each from the currrent directory and using the current environment, use:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ qrsh -l <span class="nv">h_rt</span><span class="o">=</span><span class="m">0</span>:30:0,h_vmem<span class="o">=</span>1G,placement<span class="o">=</span>scatter -pe ib <span class="m">4</span> mpirun ./mympiprogram
</pre></div>
</div>
</div>
<div class="section" id="interactive-jobs-on-gpu-nodes">
<h2>Interactive jobs on GPU nodes<a class="headerlink" href="#interactive-jobs-on-gpu-nodes" title="Permalink to this headline">¶</a></h2>
<p>If you want to use a GPU interactively instead of submitting a job to the GPU nodes you need to request a coprocessor and specify your shell as part of your <code class="docutils literal notranslate"><span class="pre">qrsh</span></code>, ie:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ qrsh -l <span class="nv">h_rt</span><span class="o">=</span><span class="m">2</span>:0:0,coproc_k80<span class="o">=</span><span class="m">1</span> -pty y bash
</pre></div>
</div>
<p>This will give you a bash session on a k80 GPU node for two hours, using one half of the resources on that GPU node.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./usage"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="batchjob.html" title="previous page">Batch jobs</a>
    <a class='right-next' id="next-link" href="troubleshooting.html" title="next page">Troubleshooting jobs on HPC</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By University of Leeds Research Computing Team<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="../_static/js/index.js"></script>
    
  </body>
</html>